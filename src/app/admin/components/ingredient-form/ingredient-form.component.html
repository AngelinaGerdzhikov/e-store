<div class="row">
  <div class="col-md-6">
    <form #f="ngForm"  (ngSubmit)="save(f.value)">
      <div class="form-group">
        <label for="name">Name</label>
        <input
          #name="ngModel"
          [(ngModel)]="data.name"
          name="name"
          id="name"
          type="text"
          class="form-control"
          required
        >
        <div class="alert alert-danger" *ngIf="name.touched && name.invalid">
          Name is required
        </div>
      </div>
      <div class="form-group">
        <label for="category">Category</label>
        <select
          #cat="ngModel"
          [(ngModel)]="data.category"
          name="category"
          id="category"
          class="form-control"
          (change)="filterProductsByCategory(cat.value)"
          required
        >
          <option value=""></option>
          <option
            *ngFor="let category of categories$ | async"
            value="{{ category.name }}"
          >
            {{ category.name }}
          </option>
        </select>
        <div class="alert alert-danger" *ngIf="cat.touched && cat.invalid">
          Selecting a category is required
        </div>
      </div>
      <div class="form-group">
        <label for="productUid">Related product</label>
        <select
          #productField="ngModel"
          [(ngModel)]="data.productUid"
          name="productUid"
          id="productUid"
          class="form-control"
          required
        >
          <option value=""></option>
          <option
            *ngFor="let product of filteredProducts"
            value="{{ product.key }}"
          >
            {{ product.title }}
          </option>
        </select>
        <div class="alert alert-danger" *ngIf="productField.touched && productField.invalid">
          Selecting a related product is required
        </div>
      </div>
      
      <button class="btn btn-primary" type="submit" [disabled]="!f.valid">Save</button>
      <button class="btn btn-danger" type="button" *ngIf="id" (click)="delete()">Delete</button>
    </form>    
  </div>
  <div class="col-md-6">
    <!-- <aside>
      <product-card [product]="product" [showActions]="false"></product-card>
    </aside> -->
  </div>
</div>
